<!DOCTYPE html>
<!--
  ~ Copyright 2015-2016 Meowster.com
  ~
  ~ @author Simon Hunt
  -->
<html>
<head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="img/favicon.ico"/>
    <title>McQuad</title>

    <link rel="stylesheet" href="mcquad.css">

    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="tp/polymaps-v2.5.1.min.js"></script>
    <script type="text/javascript" src="map-config.js"></script>
</head>
<body id="body">
<div id="mast">
    <div class="headdiv">
        <img src="img/grass64.png">
    </div>
    <div id="mast-title" class="headdiv">
            McQuad Map
    </div>
    <div id="mast-version" class="headdiv">
            Version 1.2
    </div>
    <div id="mast-heatmap" class="headdiv right">
        <img id="heatmap-btn" src="img/furnace64.png">
    </div>
</div>
<div id="map"></div>

<script type="text/javascript">
    var tileUrl = 'tiles/z{Z}/x{X}/t.{Y}.png',
        po = org.polymaps,
        svg = document.getElementById('map').appendChild(po.svg('svg')),
        map = po.map()
                .container(svg)
                .center({'lat': 0.0, 'lon': 0.0})
                .zoom(1)
                .zoomRange([1, McQuad.maxZoom])
                .tileSize({x: 256, y: 256})
                .add(po.image().url(po.url(tileUrl)))
                .add(po.interact());

    d3.select('#heatmap-btn').on('click', toggleHeatMap);

    function toggleHeatMap() {
        var div = d3.select('#heatmap');
        if (div.empty()) {
            createHeatMapDiv();
        } else {
            div.remove();
        }
    }

    function createHeatMapDiv() {
        var div = d3.select('body').append('div').attr('id', 'heatmap')
                .classed('centered', true);
        div.append('h2').text('Region Heat Map');
        div.append('img').attr('src', 'aux/heatmap/heat-latest.png');

        return div;
    }

</script>
</body>
</html>
